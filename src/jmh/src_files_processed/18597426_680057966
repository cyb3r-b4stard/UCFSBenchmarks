import java.util.*;
import abiturklassen.netzklassen.*;
import abiturklassen.baumklassen.*;


public class ChatServer extends Server {

    final String ENDE = "/abmelden";
 
    public ChatServer() {
      super(2000);
    }   

    public void processNewConnection(String pClientIP, int pClientPort) {
      this.send(pClientIP, pClientPort, "Willkommen " + pClientIP + " auf Port "
        + pClientPort + " beim Chat Server!");
    }

    public void processMessage(String pClientIP, int pClientPort, String pMessage) 
    {
        
        if(pMessage.charAt(0)=='/')
        {
            int leerzeichen = pMessage.indexOf(' ');
            this.bearbeiteKommando(pMessage.substring(0,leerzeichen),pMessage.substring(leerzeichen));
        }
        else
        {
            string absender = this.sucheIP(pIP).gibName();
            this.sendToAll(absender+" "+pMessage);
        }

    }
    
    public void processClosedConnection(String pClientIP, int pClientPort)
    {
        this.send(pClientIP, pClientPort, pClientIP + " " + pClientPort +
        " Auf Wiedersehen.");
        this.send(pClientIP, pClientPort, ENDE);
    }
    
    public void bearbeiteKommando(String pKommando, String pNachricht, pIP, pPort)
    {
        
        if(pKommando.equals(joinas)
        {
            registrieren(pNachricht, pIP, int Port)
            
        }
        else
        {
            
        }
        
    }
}