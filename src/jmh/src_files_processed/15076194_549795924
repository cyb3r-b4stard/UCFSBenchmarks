dr
import acm.graphics.*;
import java.awt.event.*;
import java.awt.Color;
import acm.util.SoundClip;
import acm.util.RandomGenerator;
/**
 * class HorsePlay uses sound
 * and mouse and key events to allow the user to
 * interact with an image.
 * 
 * Also demonstrates 
 * - variable scope, only those items used by multiple
 *   methods are declared with class scope.
 * - use of GLabel
 * - use of keys to move an image on the screen
 * - RandGenerator
 * 
 * @author J. Smith 
 * @version January 2015
 */
public class HorsePlay extends GraphicsProgram
{
    private static final int STEP = 20;
    private RandomGenerator randGen = RandomGenerator.getInstance();
    private GImage horse;
    private GRect  food;
    private SoundClip neigh;
    private GRect nose;
    private GLabel meter;
    
    /**
     * Initialize all - instance fields
     * defined as private in the section above.
     * 
     * Add additional GObjects that the player does
     * not interact with as local variables here.
     */
    public void init ()
    {
        
        horse = new GImage("horse.png", getWidth()/2, getHeight()-200);
        horse.setSize(200, 200);
        add(horse);
        neigh = new SoundClip("horse.wav");
        neigh.setVolume(.5);
        nose = new GRect(horse.getX(), horse.getY()+50, 20, 20);
        nose.setColor(Color.white);
        add(nose);
        nose.sendToBack(); 
        
        meter = new GLabel ("Your horse is hungry", 20, 50);
        meter.setFont("SansSerif-bold-50");
        add(meter);
        
        food = new GRect(20, horse.getY(), 20, 20);
        food.setFilled(true);
        food.setColor(Color.orange);
        add(food);
        addMouseListeners();
        addKeyListeners();
    }
    
    /**
     * Write code in mousePressed
     * 
     * Other mouse methods you may wish to write can
     * be found in the Java api for MouseListener and
     * MouseMotionListener.
     */
    @Override
    public void mousePressed (MouseEvent e)
    {
        if (nose.contains(e.getX(), e.getY()))
        {
            neigh.play();
        }
    }
    
    /**
     * This method responds to key press events.
     * Remember that the code can be used for odd keys
     * like the arrows or the number pad.
     * 
     * The key char can be used for letters and numbers and
     * punctuation.
     * 
     * This gives an example of comparing the key char to the
     * keyboard 'j'
     */
    @Override
    public void keyPressed (KeyEvent e)
    {
        int code = e.getKeyCode();
        char key = e.getKeyChar();
        System.out.println("Key code = " + code + " key char = " + key);
        if (key == 'j')
        {
            /**
             * The move method lets you change the position
             * of any GObject by an amount in the x and amount
             * in the y direction.
             * 
             * negative amounts move the object left or up
             * positive amounts move the object right or down
             */
            horse.move(-10, 0); 
            nose.move(-10, 0); 
            
            if (horse.getBounds().intersects(food.getBounds()))
            {
                meter.setLabel("Now your horse is happy");
                /**
                 * This section of code moves the food to a new
                 * random x coordinate relative to the horse.
                 * 
                 * if the new x coordinate would be off the screen
                 * it positions the food on the right side of the
                 * screen.
                 * 
                 * The setLocation method lets you reposition any
                 * GObject to a new x,y coordinate.
                 */
                double foodloc = horse.getX()-randGen.nextInt(10,50);
                if (foodloc < 0)
                {
                    foodloc = getWidth()-food.getWidth();
                }
                food.setLocation(foodloc, food.getY());
            }
            
        }
    }
    
    
}